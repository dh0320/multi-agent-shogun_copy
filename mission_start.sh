#!/bin/bash
# ğŸ«– multi-agent-kairai ä»»å‹™é–‹å§‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¯æ—¥ã®èµ·å‹•ç”¨ï¼‰
# Daily Deployment Script for Multi-Agent Orchestration System
#
# ä½¿ç”¨æ–¹æ³•:
#   ./mission_start.sh           # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ï¼ˆé€šå¸¸ï¼‰
#   ./mission_start.sh -s        # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆClaudeèµ·å‹•ãªã—ï¼‰
#   ./mission_start.sh -h        # ãƒ˜ãƒ«ãƒ—è¡¨ç¤º

set -e

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å–å¾—
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# è¨€èªè¨­å®šã‚’èª­ã¿å–ã‚Šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: jaï¼‰
LANG_SETTING="ja"
if [ -f "./config/settings.yaml" ]; then
    LANG_SETTING=$(grep "^language:" ./config/settings.yaml 2>/dev/null | awk '{print $2}' || echo "ja")
fi

# ã‚·ã‚§ãƒ«è¨­å®šã‚’èª­ã¿å–ã‚Šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: bashï¼‰
SHELL_SETTING="bash"
if [ -f "./config/settings.yaml" ]; then
    SHELL_SETTING=$(grep "^shell:" ./config/settings.yaml 2>/dev/null | awk '{print $2}' || echo "bash")
fi

# è‰²ä»˜ããƒ­ã‚°é–¢æ•°
log_info() {
    echo -e "\033[1;33mã€å ±ã€‘\033[0m $1"
}

log_success() {
    echo -e "\033[1;32mã€æˆã€‘\033[0m $1"
}

log_war() {
    echo -e "\033[1;31mã€å‹•ã€‘\033[0m $1"
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆé–¢æ•°ï¼ˆbash/zshå¯¾å¿œï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ä½¿ç”¨æ³•: generate_prompt "ãƒ©ãƒ™ãƒ«" "è‰²" "ã‚·ã‚§ãƒ«"
# è‰²: red, green, blue, magenta, cyan, yellow
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
generate_prompt() {
    local label="$1"
    local color="$2"
    local shell_type="$3"

    if [ "$shell_type" == "zsh" ]; then
        # zshç”¨: %F{color}%B...%b%f å½¢å¼
        echo "(%F{${color}}%B${label}%b%f) %F{green}%B%~%b%f%# "
    else
        # bashç”¨: \[\033[...m\] å½¢å¼
        local color_code
        case "$color" in
            red)     color_code="1;31" ;;
            green)   color_code="1;32" ;;
            yellow)  color_code="1;33" ;;
            blue)    color_code="1;34" ;;
            magenta) color_code="1;35" ;;
            cyan)    color_code="1;36" ;;
            *)       color_code="1;37" ;;  # white (default)
        esac
        echo "(\[\033[${color_code}m\]${label}\[\033[0m\]) \[\033[1;32m\]\w\[\033[0m\]\$ "
    fi
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ã‚ªãƒ—ã‚·ãƒ§ãƒ³è§£æ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SETUP_ONLY=false
OPEN_TERMINAL=false
SHELL_OVERRIDE=""

while [[ $# -gt 0 ]]; do
    case $1 in
        -s|--setup-only)
            SETUP_ONLY=true
            shift
            ;;
        -t|--terminal)
            OPEN_TERMINAL=true
            shift
            ;;
        -shell|--shell)
            if [[ -n "$2" && "$2" != -* ]]; then
                SHELL_OVERRIDE="$2"
                shift 2
            else
                echo "ã‚¨ãƒ©ãƒ¼: -shell ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯ bash ã¾ãŸã¯ zsh ã‚’æŒ‡å®šã—ã¦ãã ã•ã„"
                exit 1
            fi
            ;;
        -h|--help)
            echo ""
            echo "ğŸ«– multi-agent-kairai ä»»å‹™é–‹å§‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ"
            echo ""
            echo "ä½¿ç”¨æ–¹æ³•: ./mission_start.sh [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]"
            echo ""
            echo "ã‚ªãƒ—ã‚·ãƒ§ãƒ³:"
            echo "  -s, --setup-only    tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆClaudeèµ·å‹•ãªã—ï¼‰"
            echo "  -t, --terminal      Windows Terminal ã§æ–°ã—ã„ã‚¿ãƒ–ã‚’é–‹ã"
            echo "  -shell, --shell SH  ã‚·ã‚§ãƒ«ã‚’æŒ‡å®šï¼ˆbash ã¾ãŸã¯ zshï¼‰"
            echo "                      æœªæŒ‡å®šæ™‚ã¯ config/settings.yaml ã®è¨­å®šã‚’ä½¿ç”¨"
            echo "  -h, --help          ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"
            echo ""
            echo "ä¾‹:"
            echo "  ./mission_start.sh              # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ï¼ˆé€šå¸¸ã®ä»»å‹™é–‹å§‹ï¼‰"
            echo "  ./mission_start.sh -s           # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆæ‰‹å‹•ã§Claudeèµ·å‹•ï¼‰"
            echo "  ./mission_start.sh -t           # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹• + ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¿ãƒ–å±•é–‹"
            echo "  ./mission_start.sh -shell bash  # bashç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§èµ·å‹•"
            echo "  ./mission_start.sh -shell zsh   # zshç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§èµ·å‹•"
            echo ""
            echo "ã‚¨ã‚¤ãƒªã‚¢ã‚¹:"
            echo "  csst  â†’ cd /mnt/c/tools/multi-agent-kairai && ./mission_start.sh"
            echo "  css   â†’ tmux attach-session -t kairai"
            echo "  csm   â†’ tmux attach-session -t multiagent"
            echo ""
            exit 0
            ;;
        *)
            echo "ä¸æ˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³: $1"
            echo "./mission_start.sh -h ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"
            exit 1
            ;;
    esac
done

# ã‚·ã‚§ãƒ«è¨­å®šã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³å„ªå…ˆï¼‰
if [ -n "$SHELL_OVERRIDE" ]; then
    if [[ "$SHELL_OVERRIDE" == "bash" || "$SHELL_OVERRIDE" == "zsh" ]]; then
        SHELL_SETTING="$SHELL_OVERRIDE"
    else
        echo "ã‚¨ãƒ©ãƒ¼: -shell ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯ bash ã¾ãŸã¯ zsh ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ï¼ˆæŒ‡å®šå€¤: $SHELL_OVERRIDEï¼‰"
        exit 1
    fi
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ä»»å‹™é–‹å§‹ãƒãƒŠãƒ¼è¡¨ç¤ºï¼ˆCC0ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ASCIIã‚¢ãƒ¼ãƒˆä½¿ç”¨ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ã€è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¡¨ç¤ºã€‘
# ASCIIã‚¢ãƒ¼ãƒˆ: syntax-samurai/ryu - CC0 1.0 Universal (Public Domain)
# å‡ºå…¸: https://github.com/syntax-samurai/ryu
# "all files and scripts in this repo are released CC0 / kopimi!"
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
show_startup_banner() {
    clear

    # ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒŠãƒ¼ï¼ˆè‰²ä»˜ãï¼‰
    echo ""
    echo -e "\033[1;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆ   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•    â•šâ•â•   â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â• â•šâ•â•â•šâ•â•  â•šâ•â•â•â•\033[0m \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\033[0m"
    echo -e "\033[1;31mâ•‘\033[0m       \033[1;37mä»»å‹™é–‹å§‹ã—ã¾ã™ã€‚\033[0m         \033[1;36mğŸ«–\033[0m    \033[1;35mMission Start!\033[0m                      \033[1;31mâ•‘\033[0m"
    echo -e "\033[1;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m"
    echo ""

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # æ©Ÿå‹•å…µéšŠåˆ—ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ï¼‰
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo -e "\033[1;34m  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\033[0m"
    echo -e "\033[1;34m  â•‘\033[0m                    \033[1;37mã€ æ©Ÿ å‹• å…µ éšŠ åˆ— ãƒ» å…« å é… å‚™ ã€‘\033[0m                    \033[1;34mâ•‘\033[0m"
    echo -e "\033[1;34m  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m"

    cat << 'BOSCO_EOF'

       /\      /\      /\      /\      /\      /\      /\      /\
      /||\    /||\    /||\    /||\    /||\    /||\    /||\    /||\
     /_||\   /_||\   /_||\   /_||\   /_||\   /_||\   /_||\   /_||\
       ||      ||      ||      ||      ||      ||      ||      ||
      /||\    /||\    /||\    /||\    /||\    /||\    /||\    /||\
      /  \    /  \    /  \    /  \    /  \    /  \    /  \    /  \
     [B01]   [B02]   [B03]   [B04]   [B05]   [B06]   [B07]   [B08]

BOSCO_EOF

    echo -e "                    \033[1;36mã€Œã€Œã€Œ äº†è§£ã€‚ä»»å‹™é–‹å§‹ã—ã¾ã™ã€‚ ã€ã€ã€\033[0m"
    echo ""

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo -e "\033[1;33m  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“\033[0m"
    echo -e "\033[1;33m  â”ƒ\033[0m  \033[1;37mğŸ«– multi-agent-kairai\033[0m  ã€œ \033[1;36må®®å»·ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±ç‡ã‚·ã‚¹ãƒ†ãƒ \033[0m ã€œ           \033[1;33mâ”ƒ\033[0m"
    echo -e "\033[1;33m  â”ƒ\033[0m                                                                           \033[1;33mâ”ƒ\033[0m"
    echo -e "\033[1;33m  â”ƒ\033[0m    \033[1;35måŸ·è¡Œå®˜\033[0m: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±æ‹¬    \033[1;31måŸ·äº‹\033[0m: ã‚¿ã‚¹ã‚¯ç®¡ç†    \033[1;34mæ©Ÿå‹•å…µ\033[0m: å®Ÿåƒéƒ¨éšŠÃ—8      \033[1;33mâ”ƒ\033[0m"
    echo -e "\033[1;33m  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›\033[0m"
    echo ""
}

# ãƒãƒŠãƒ¼è¡¨ç¤ºå®Ÿè¡Œ
show_startup_banner

echo -e "  \033[1;33mã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã‚’é–‹å§‹ã—ã¾ã™\033[0m (Setting up the system)"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 1: æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ğŸ§¹ æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ä¸­..."
tmux kill-session -t multiagent 2>/dev/null && log_info "  â””â”€ multiagentã‚»ãƒƒã‚·ãƒ§ãƒ³ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†" || log_info "  â””â”€ multiagentã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å­˜åœ¨ã›ãš"
tmux kill-session -t kairai 2>/dev/null && log_info "  â””â”€ kairaiã‚»ãƒƒã‚·ãƒ§ãƒ³ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†" || log_info "  â””â”€ kairaiã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å­˜åœ¨ã›ãš"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 1.5: å‰å›è¨˜éŒ²ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆå†…å®¹ãŒã‚ã‚‹å ´åˆã®ã¿ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BACKUP_DIR="./logs/backup_$(date '+%Y%m%d_%H%M%S')"
NEED_BACKUP=false

if [ -f "./dashboard.md" ]; then
    if grep -q "cmd_" "./dashboard.md" 2>/dev/null; then
        NEED_BACKUP=true
    fi
fi

if [ "$NEED_BACKUP" = true ]; then
    mkdir -p "$BACKUP_DIR" || true
    cp "./dashboard.md" "$BACKUP_DIR/" 2>/dev/null || true
    cp -r "./queue/reports" "$BACKUP_DIR/" 2>/dev/null || true
    cp -r "./queue/tasks" "$BACKUP_DIR/" 2>/dev/null || true
    cp "./queue/kairai_to_pulonia.yaml" "$BACKUP_DIR/" 2>/dev/null || true
    log_info "ğŸ“¦ å‰å›ã®è¨˜éŒ²ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: $BACKUP_DIR"
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 2: å ±å‘Šãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ğŸ“œ å‰å›ã®è»è­°è¨˜éŒ²ã‚’ç ´æ£„ä¸­..."

# queue ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ
[ -d ./queue/reports ] || mkdir -p ./queue/reports
[ -d ./queue/tasks ] || mkdir -p ./queue/tasks

# æ©Ÿå‹•å…µã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
for i in {1..8}; do
    cat > ./queue/tasks/bosco${i}.yaml << EOF
# æ©Ÿå‹•å…µ${i}å°‚ç”¨ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
task:
  task_id: null
  parent_cmd: null
  description: null
  target_path: null
  status: idle
  timestamp: ""
EOF
done

# æ©Ÿå‹•å…µãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
for i in {1..8}; do
    cat > ./queue/reports/bosco${i}_report.yaml << EOF
worker_id: bosco${i}
task_id: null
timestamp: ""
status: idle
result: null
EOF
done

# ã‚­ãƒ¥ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
cat > ./queue/kairai_to_pulonia.yaml << 'EOF'
queue: []
EOF

cat > ./queue/pulonia_to_bosco.yaml << 'EOF'
assignments:
  bosco1:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco2:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco3:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco4:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco5:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco6:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco7:
    task_id: null
    description: null
    target_path: null
    status: idle
  bosco8:
    task_id: null
    description: null
    target_path: null
    status: idle
EOF

log_success "âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 3: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’åˆæœŸåŒ–ä¸­..."
TIMESTAMP=$(date "+%Y-%m-%d %H:%M")

if [ "$LANG_SETTING" = "ja" ]; then
    # æ—¥æœ¬èªã®ã¿
    cat > ./dashboard.md << EOF
# ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
æœ€çµ‚æ›´æ–°: ${TIMESTAMP}

## ğŸš¨ è¦å¯¾å¿œ - æ—…äººã®ã”åˆ¤æ–­ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™
ãªã—

## ğŸ”„ é€²è¡Œä¸­ - ç¾åœ¨ä½œæ¥­ä¸­
ãªã—

## âœ… æœ¬æ—¥ã®æˆæœ
| æ™‚åˆ» | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | ä»»å‹™ | çµæœ |
|------|------|------|------|

## ğŸ¯ ã‚¹ã‚­ãƒ«åŒ–å€™è£œ - æ‰¿èªå¾…ã¡
ãªã—

## ğŸ› ï¸ ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚­ãƒ«
ãªã—

## â¸ï¸ å¾…æ©Ÿä¸­
ãªã—

## â“ ä¼ºã„äº‹é …
ãªã—
EOF
else
    # æ—¥æœ¬èª + ç¿»è¨³ä½µè¨˜
    cat > ./dashboard.md << EOF
# ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ (Status Report)
æœ€çµ‚æ›´æ–° (Last Updated): ${TIMESTAMP}

## ğŸš¨ è¦å¯¾å¿œ - æ—…äººã®ã”åˆ¤æ–­ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ (Action Required - Awaiting Lord's Decision)
ãªã— (None)

## ğŸ”„ é€²è¡Œä¸­ - ç¾åœ¨ä½œæ¥­ä¸­ (In Progress - Currently Working)
ãªã— (None)

## âœ… æœ¬æ—¥ã®æˆæœ (Today's Achievements)
| æ™‚åˆ» (Time) | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ (Project) | ä»»å‹™ (Mission) | çµæœ (Result) |
|------|------|------|------|

## ğŸ¯ ã‚¹ã‚­ãƒ«åŒ–å€™è£œ - æ‰¿èªå¾…ã¡ (Skill Candidates - Pending Approval)
ãªã— (None)

## ğŸ› ï¸ ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚­ãƒ« (Generated Skills)
ãªã— (None)

## â¸ï¸ å¾…æ©Ÿä¸­ (On Standby)
ãªã— (None)

## â“ ä¼ºã„äº‹é … (Questions for Lord)
ãªã— (None)
EOF
fi

log_success "  â””â”€ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–å®Œäº† (è¨€èª: $LANG_SETTING, ã‚·ã‚§ãƒ«: $SHELL_SETTING)"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 4: multiagentã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆï¼ˆ9ãƒšã‚¤ãƒ³ï¼špulonia + bosco1-8ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# tmux ã®å­˜åœ¨ç¢ºèª
if ! command -v tmux &> /dev/null; then
    echo ""
    echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "  â•‘  [ERROR] tmux not found!                              â•‘"
    echo "  â•‘  tmux ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“                                 â•‘"
    echo "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
    echo "  â•‘  Run first_setup.sh first:                            â•‘"
    echo "  â•‘  ã¾ãš first_setup.sh ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:               â•‘"
    echo "  â•‘     ./first_setup.sh                                  â•‘"
    echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    exit 1
fi

log_war "ğŸ¤– åŸ·äº‹ãƒ»æ©Ÿå‹•å…µã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ä¸­ï¼ˆ9åé…å‚™ï¼‰..."

# æœ€åˆã®ãƒšã‚¤ãƒ³ä½œæˆ
if ! tmux new-session -d -s multiagent -n "agents" 2>/dev/null; then
    echo ""
    echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "  â•‘  [ERROR] Failed to create tmux session 'multiagent'      â•‘"
    echo "  â•‘  tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³ 'multiagent' ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ       â•‘"
    echo "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
    echo "  â•‘  An existing session may be running.                     â•‘"
    echo "  â•‘  æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™              â•‘"
    echo "  â•‘                                                          â•‘"
    echo "  â•‘  Check: tmux ls                                          â•‘"
    echo "  â•‘  Kill:  tmux kill-session -t multiagent                  â•‘"
    echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    exit 1
fi

# 3x3ã‚°ãƒªãƒƒãƒ‰ä½œæˆï¼ˆåˆè¨ˆ9ãƒšã‚¤ãƒ³ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# é‡è¦: ãƒšã‚¤ãƒ³ç•ªå·ã¨ãƒœã‚¹ã‚³ç•ªå·ã®å¯¾å¿œ
#   ãƒšã‚¤ãƒ³0 = puloniaï¼ˆåŸ·äº‹ï¼‰
#   ãƒšã‚¤ãƒ³1 = bosco1, ãƒšã‚¤ãƒ³2 = bosco2, ... ãƒšã‚¤ãƒ³8 = bosco8
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# 3x3ã‚°ãƒªãƒƒãƒ‰ä½œæˆï¼ˆåˆè¨ˆ9ãƒšã‚¤ãƒ³ï¼‰
# æœ€åˆã«3åˆ—ã«åˆ†å‰²
tmux split-window -h -t "multiagent:0"
tmux split-window -h -t "multiagent:0"

# å„åˆ—ã‚’3è¡Œã«åˆ†å‰²
tmux select-pane -t "multiagent:0.0"
tmux split-window -v
tmux split-window -v

tmux select-pane -t "multiagent:0.3"
tmux split-window -v
tmux split-window -v

tmux select-pane -t "multiagent:0.6"
tmux split-window -v
tmux split-window -v

# ãƒšã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«è¨­å®šï¼ˆ0: pulonia, 1-8: bosco-8ï¼‰
PANE_TITLES=("pulonia" "bosco1" "bosco2" "bosco3" "bosco4" "bosco5" "bosco6" "bosco7" "bosco8")
# è‰²è¨­å®šï¼ˆpulonia: èµ¤, ashigaru: é’ï¼‰
PANE_COLORS=("red" "blue" "blue" "blue" "blue" "blue" "blue" "blue" "blue")

for i in {0..8}; do
    tmux select-pane -t "multiagent:0.$i" -T "${PANE_TITLES[$i]}"
    PROMPT_STR=$(generate_prompt "${PANE_TITLES[$i]}" "${PANE_COLORS[$i]}" "$SHELL_SETTING")
    tmux send-keys -t "multiagent:0.$i" "cd \"$(pwd)\" && export PS1='${PROMPT_STR}' && clear" Enter
done

log_success "  â””â”€ åŸ·äº‹ãƒ»æ©Ÿå‹•å…µã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã€æ§‹ç¯‰å®Œäº†"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 5: kairaiã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆï¼ˆ1ãƒšã‚¤ãƒ³ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_war "ğŸ‘‘ åŸ·è¡Œå®˜ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ä¸­..."
if ! tmux new-session -d -s kairai 2>/dev/null; then
    echo ""
    echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "  â•‘  [ERROR] Failed to create tmux session 'kairai'          â•‘"
    echo "  â•‘  tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³ 'kairai' ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ           â•‘"
    echo "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
    echo "  â•‘  An existing session may be running.                     â•‘"
    echo "  â•‘  æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™              â•‘"
    echo "  â•‘                                                          â•‘"
    echo "  â•‘  Check: tmux ls                                          â•‘"
    echo "  â•‘  Kill:  tmux kill-session -t kairai                      â•‘"
    echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    exit 1
fi
KAIRAI_PROMPT=$(generate_prompt "åŸ·è¡Œå®˜" "magenta" "$SHELL_SETTING")
tmux send-keys -t kairai "cd \"$(pwd)\" && export PS1='${KAIRAI_PROMPT}' && clear" Enter
tmux select-pane -t kairai:0.0 -P 'bg=#002b36'  # åŸ·è¡Œå®˜ã® Solarized Dark

log_success "  â””â”€ åŸ·è¡Œå®˜ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã€æ§‹ç¯‰å®Œäº†"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 6: Claude Code èµ·å‹•ï¼ˆ--setup-only ã§ã‚¹ã‚­ãƒƒãƒ—ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
if [ "$SETUP_ONLY" = false ]; then
    # Claude Code CLI ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯
    if ! command -v claude &> /dev/null; then
        log_info "âš ï¸  claude ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        echo "  first_setup.sh ã‚’å†å®Ÿè¡Œã—ã¦ãã ã•ã„:"
        echo "    ./first_setup.sh"
        exit 1
    fi

    log_war "ğŸ‘‘ å…¨è»ã« Claude Code ã‚’å¬å–šä¸­..."

    # åŸ·è¡Œå®˜
    tmux send-keys -t kairai "MAX_THINKING_TOKENS=0 claude --model opus --dangerously-skip-permissions"
    tmux send-keys -t kairai Enter
    log_info "  â””â”€ åŸ·è¡Œå®˜ã€å¬å–šå®Œäº†"

    # å°‘ã—å¾…æ©Ÿï¼ˆå®‰å®šã®ãŸã‚ï¼‰
    sleep 1

    # åŸ·äº‹ + æ©Ÿå‹•å…µï¼ˆ9ãƒšã‚¤ãƒ³ï¼‰
    for i in {0..8}; do
        tmux send-keys -t "multiagent:0.$i" "claude --dangerously-skip-permissions"
        tmux send-keys -t "multiagent:0.$i" Enter
    done
    log_info "  â””â”€ åŸ·äº‹ãƒ»æ©Ÿå‹•å…µã€å¬å–šå®Œäº†"

    log_success "âœ… å…¨è» Claude Code èµ·å‹•å®Œäº†"
    echo ""

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # STEP 6.5: å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    log_war "ğŸ“œ å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¾ã›ä¸­..."
    echo ""

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ASCIIã‚¢ãƒ¼ãƒˆï¼ˆsyntax-samurai/ryu - CC0 1.0 Public Domainï¼‰
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo -e "\033[1;35m  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\033[0m"
    echo -e "\033[1;35m  â”‚\033[0m                              \033[1;37mã€ System Ready ã€‘\033[0m  ASCII Art (CC0 Public Domain)                          \033[1;35mâ”‚\033[0m"
    echo -e "\033[1;35m  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\033[0m"

    cat << 'NINJA_EOF'
...................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’                         ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’  â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’                         ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’          â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’                             ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’               â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                                ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’                    â–’â–’â–’â–’â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                                    ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’                            â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’                                        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                      â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘       â–’          ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’    â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘                                 â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘               ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘                          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’  â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘             â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘   â–’         ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘  â–’         ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘    â–’        ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’  â–‘ â–‘               â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘                 â–‘            ...................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘  â–‘                 â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–“â–“â–“â–“â–‘â–‘â–‘â–“â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“                    â–‘ â–‘   â–’         ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’   â–‘â–‘â–‘â–‘â–‘ â–‘                  â–“â–“â–“â–“â–“â–“â–‘â–“â–“â–“â–“â–‘â–‘â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“                    â–‘  â–‘ â–‘  â–’         ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘                 â–‘â–“â–‘â–‘â–“â–“â–“â–“â–“â–‘â–“â–“â–“â–‘â–‘â–‘â–‘â–‘                   â–‘ â–‘â–‘ â–‘â–‘ â–‘   â–’         ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘                    â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘                   â–‘â–‘    â–‘ â–‘â–‘ â–‘    â–’        ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                      â–‘â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘                     â–‘â–‘â–‘  â–‘  â–‘ â–‘   â–’        ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’    â–‘â–‘â–‘â–‘â–‘â–‘                         â–‘â–‘â–‘â–“â–“â–“â–‘â–“â–‘â–‘â–‘â–‘      â–‘                  â–‘ â–‘â–‘ â–‘    â–’        ..................................
.................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â–“â–“        â–“  â–‘â–‘ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘   â–‘â–‘  â–“        â–ˆâ–“       â–‘  â–‘ â–‘   â–’â–’       ..................................
..................................â–‘â–‘â–‘â–‘â–‘â–’ â–’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–“â–“â–ˆâ–ˆ  â–“  â–ˆâ–ˆ â–ˆâ–ˆâ–“  â–“ â–‘â–‘â–‘â–“â–‘  â–‘ â–‘ â–‘â–‘â–‘â–‘  â–“   â–ˆâ–ˆ â–“â–ˆ  â–“  â–ˆâ–ˆâ–“â–“  â–‘â–‘â–‘â–‘  â–‘ â–‘    â–’      ...................................
..................................â–‘â–‘â–‘â–‘â–‘â–’ â–’â–’   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–“â–ˆâ–ˆ  â–“â–“  â–“ â–ˆâ–ˆâ–“  â–“â–‘â–‘â–‘â–‘â–“â–“â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–“  â–“â–ˆâ–ˆ â–“   â–“  â–ˆâ–ˆâ–“â–“ â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘     â–’      ...................................
..................................â–‘â–‘â–‘â–‘â–‘  â–’â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–‘â–‘ â–“â–ˆâ–ˆâ–ˆ  â–“â–“â–“â–“ â–ˆâ–ˆâ–ˆâ–‘  â–‘â–‘â–‘â–‘â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â–‘â–“â–ˆâ–ˆ  â–“â–“â–“  â–ˆâ–ˆâ–ˆâ–“ â–‘â–‘â–“â–“â–‘â–‘  â–‘    â–’ â–’      ...................................
...................................â–‘â–‘â–‘â–‘  â–’â–‘    â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–‘  â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ      â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ â–‘â–‘â–“â–“â–“â–“â–‘â–‘  â–‘    â–’ â–’      ...................................
...................................â–‘â–‘â–‘â–‘ â–’ â–‘â–’    â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–“â–“â–“â–‘â–‘ â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘    â–’â–’ â–’      ...................................
...................................â–‘â–‘â–‘â–‘ â–‘ â–‘â–‘     â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘ â–‘â–‘   â–‘â–‘â–“â–‘â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–‘â–‘      â–’â–’ â–’      ...................................
...................................â–‘â–‘â–‘â–‘ â–‘ â–‘â–‘      â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–ˆâ–ˆ  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–‘â–‘ â–‘    â–’â–’  â–’      ...................................
...................................â–‘â–‘â–‘â–‘â–’â–‘â–‘â–’â–‘â–‘      â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“â–“â–‘â–‘â–‘â–‘      â–’â–’  â–’     ....................................
...................................â–‘â–‘â–‘â–‘â–’â–‘â–‘ â–‘â–‘       â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â–’â–’  â–’     ....................................
...................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’â–‘â–’       â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–“â–“â–“â–‘â–‘   â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â–’   â–’     ....................................
...................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘           â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“              â–‘    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘            â–’   â–’     ....................................
....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’  â–’â–’        â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’                         â–’â–’â–’â–’â–’   â–’    â–’    .....................................
....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–’ â–’â–’â–’â–‘â–‘â–‘        â–“â–“â–“â–“â–“â–“   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’      â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–’â–’    â–’â–’â–’â–’â–’â–’â–’  â–’â–’    â–’    .....................................
....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘ â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘          â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–‘â–’     â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–‘â–’â–’â–’â–’   â–’â–’         .....................................
.....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘â–‘â–‘  â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–’â–‘â–’â–’    â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–’â–’   â–’â–’â–’         ......................................
.....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–’   â–’â–’â–’â–’â–’â–’â–’â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–’â–’â–’   â–’â–’          ......................................
.....................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘      â–’â–’â–’â–’â–’â–’â–’    â–’  â–‘â–‘â–‘â–’â–’â–’â–’  â–’â–’â–’          ......................................
......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–’â–‘â–’â–’â–’ â–’â–’â–’    â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’   â–’â–’â–’â–’      â–’   .......................................
......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’  â–‘â–‘â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’  â–‘â–’â–’â–’â–’       â–’   .......................................
......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’ â–’â–’â–‘â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–’â–’â–’â–’â–’       â–’   .......................................
......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’ â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–’â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–’â–’â–’â–’â–’â–’      â–’    .......................................
.......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–‘â–‘â–’â–‘â–’â–’â–’ â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’        â–’    .......................................
.......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–‘â–’â–’â–’â–’â–’     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’        â–’    .......................................
.......................................â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–‘â–‘â–’â–‘â–’â–’â–’â–’â–’â–’  â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’        â–’     .......................................
NINJA_EOF

    echo ""
    echo -e "                                    \033[1;35mã€Œ Mission Complete! ã€\033[0m"
    echo ""
    echo -e "                               \033[0;36m[ASCII Art: syntax-samurai/ryu - CC0 1.0 Public Domain]\033[0m"
    echo ""

    echo "  Claude Code ã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­ï¼ˆæœ€å¤§30ç§’ï¼‰..."

    # åŸ·è¡Œå®˜ã®èµ·å‹•ã‚’ç¢ºèªï¼ˆæœ€å¤§30ç§’å¾…æ©Ÿï¼‰
    for i in {1..30}; do
        if tmux capture-pane -t kairai -p | grep -q "bypass permissions"; then
            echo "  â””â”€ åŸ·è¡Œå®˜ã® Claude Code èµ·å‹•ç¢ºèªå®Œäº†ï¼ˆ${i}ç§’ï¼‰"
            break
        fi
        sleep 1
    done

    # åŸ·è¡Œå®˜ã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹
    log_info "  â””â”€ åŸ·è¡Œå®˜ã«æŒ‡ç¤ºæ›¸ã‚’ä¼é”ä¸­..."
    tmux send-keys -t kairai "instructions/kairai.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚"
    sleep 0.5
    tmux send-keys -t kairai Enter

    # åŸ·äº‹ã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹
    sleep 2
    log_info "  â””â”€ åŸ·äº‹ã«æŒ‡ç¤ºæ›¸ã‚’ä¼é”ä¸­..."
    tmux send-keys -t "multiagent:0.0" "instructions/pulonia.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚"
    sleep 0.5
    tmux send-keys -t "multiagent:0.0" Enter

    # æ©Ÿå‹•å…µã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ï¼ˆ1-8ï¼‰
    sleep 2
    log_info "  â””â”€ æ©Ÿå‹•å…µã«æŒ‡ç¤ºæ›¸ã‚’ä¼é”ä¸­..."
    for i in {1..8}; do
        tmux send-keys -t "multiagent:0.$i" "instructions/bosco.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç¢ºèªã€‚ã‚ãªãŸã¯ãƒœã‚¹ã‚³${i}å·ã§ã‚ã‚‹ã€‚"
        sleep 0.3
        tmux send-keys -t "multiagent:0.$i" Enter
        sleep 0.5
    done

    log_success "âœ… å…¨è»ã«æŒ‡ç¤ºæ›¸ä¼é”å®Œäº†"
    echo ""
fi

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 7: ç’°å¢ƒç¢ºèªãƒ»å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ğŸ” ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ç¢ºèªä¸­..."
echo ""
echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "  â”‚  ğŸ“º Tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ (Sessions)                             â”‚"
echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
tmux list-sessions | sed 's/^/     /'
echo ""
echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "  â”‚  ğŸ© é…ç½®å›³ (Formation)                                   â”‚"
echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "     ã€kairaiã‚»ãƒƒã‚·ãƒ§ãƒ³ã€‘åŸ·è¡Œå®˜"
echo "     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "     â”‚  Pane 0: åŸ·è¡Œå®˜ (KAIRAI)      â”‚  â† ç·å¤§å°†ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±æ‹¬"
echo "     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "     ã€multiagentã‚»ãƒƒã‚·ãƒ§ãƒ³ã€‘åŸ·äº‹ãƒ»æ©Ÿå‹•å…µï¼ˆ3x3 = 9ãƒšã‚¤ãƒ³ï¼‰"
echo "     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "     â”‚  pulonia   â”‚bosco3â”‚bosco6â”‚"
echo "     â”‚  (åŸ·äº‹) â”‚ (æ©Ÿå‹•å…µ3) â”‚ (æ©Ÿå‹•å…µ6) â”‚"
echo "     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "     â”‚bosco1â”‚bosco4â”‚bosco7â”‚"
echo "     â”‚ (æ©Ÿå‹•å…µ1) â”‚ (æ©Ÿå‹•å…µ4) â”‚ (æ©Ÿå‹•å…µ7) â”‚"
echo "     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "     â”‚bosco2â”‚bosco5â”‚bosco8â”‚"
echo "     â”‚ (æ©Ÿå‹•å…µ2) â”‚ (æ©Ÿå‹•å…µ5) â”‚ (æ©Ÿå‹•å…µ8) â”‚"
echo "     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""

echo ""
echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "  â•‘  ğŸ«– ä»»å‹™é–‹å§‹æº–å‚™å®Œäº†ã€‚Mission Ready!                      â•‘"
echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

if [ "$SETUP_ONLY" = true ]; then
    echo "  âš ï¸  ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ãƒ¢ãƒ¼ãƒ‰: Claude Codeã¯æœªèµ·å‹•ã§ã™"
    echo ""
    echo "  æ‰‹å‹•ã§Claude Codeã‚’èµ·å‹•ã™ã‚‹ã«ã¯:"
    echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    echo "  â”‚  # åŸ·è¡Œå®˜ã‚’å¬å–š                                            â”‚"
    echo "  â”‚  tmux send-keys -t kairai 'claude --dangerously-skip-permissions' Enter â”‚"
    echo "  â”‚                                                          â”‚"
    echo "  â”‚  # åŸ·äº‹ãƒ»æ©Ÿå‹•å…µã‚’ä¸€æ–‰å¬å–š                                   â”‚"
    echo "  â”‚  for i in {0..8}; do \\"
    echo "  â”‚    tmux send-keys -t multiagent:0.\$i \\                         â”‚"
    echo "  â”‚      'claude --dangerously-skip-permissions' Enter       â”‚"
    echo "  â”‚  done                                                    â”‚"
    echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    echo ""
fi

echo "  æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "  â”‚  åŸ·è¡Œå®˜ã«ã‚¢ã‚¿ãƒƒãƒã—ã¦å‘½ä»¤ã‚’é–‹å§‹:                            â”‚"
echo "  â”‚     tmux attach-session -t kairai   (ã¾ãŸã¯: css)        â”‚"
echo "  â”‚                                                          â”‚"
echo "  â”‚  åŸ·äº‹ãƒ»æ©Ÿå‹•å…µã‚’ç¢ºèªã™ã‚‹:                                    â”‚"
echo "  â”‚     tmux attach-session -t multiagent   (ã¾ãŸã¯: csm)    â”‚"
echo "  â”‚                                                          â”‚"
echo "  â”‚  â€» å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¿æ¸ˆã¿ã€‚                 â”‚"
echo "  â”‚    ã™ãã«å‘½ä»¤ã‚’é–‹å§‹ã§ãã¾ã™ã€‚                             â”‚"
echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "   Mission Ready! All systems operational."
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 8: Windows Terminal ã§ã‚¿ãƒ–ã‚’é–‹ãï¼ˆ-t ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ™‚ã®ã¿ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
if [ "$OPEN_TERMINAL" = true ]; then
    log_info "ğŸ“º Windows Terminal ã§ã‚¿ãƒ–ã‚’å±•é–‹ä¸­..."

    # Windows Terminal ãŒåˆ©ç”¨å¯èƒ½ã‹ç¢ºèª
    if command -v wt.exe &> /dev/null; then
        wt.exe -w 0 new-tab wsl.exe -e bash -c "tmux attach-session -t kairai" \; new-tab wsl.exe -e bash -c "tmux attach-session -t multiagent"
        log_success "  â””â”€ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¿ãƒ–å±•é–‹å®Œäº†"
    else
        log_info "  â””â”€ wt.exe ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚æ‰‹å‹•ã§ã‚¢ã‚¿ãƒƒãƒã—ã¦ãã ã•ã„ã€‚"
    fi
    echo ""
fi
