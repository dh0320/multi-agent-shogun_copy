# =============================================================================
# Makefile 拡張コマンド（ローカルカスタマイズ）
# =============================================================================
# 既存のMakefileに追加するコマンド
# =============================================================================

.PHONY: setup shutsujin start-setup stop status attach-shogun attach-agents

# -----------------------------------------------------------------------------
# setup: 初回セットアップ
# -----------------------------------------------------------------------------
setup:
	@./first_setup.sh

# -----------------------------------------------------------------------------
# shutsujin: 出陣（全エージェント起動）
# -----------------------------------------------------------------------------
shutsujin:
	@./shutsujin_departure.sh

# -----------------------------------------------------------------------------
# start-setup: セットアップのみ（Claude起動なし）
# -----------------------------------------------------------------------------
start-setup:
	@./shutsujin_departure.sh -s

# -----------------------------------------------------------------------------
# stop: 全セッション終了
# -----------------------------------------------------------------------------
stop:
	@tmux kill-session -t shogun 2>/dev/null || true
	@tmux kill-session -t multiagent 2>/dev/null || true
	@echo "全セッションを終了いたした"

# -----------------------------------------------------------------------------
# status: セッション状態確認
# -----------------------------------------------------------------------------
status:
	@tmux list-sessions 2>/dev/null || echo "起動中のセッションはござらぬ"

# -----------------------------------------------------------------------------
# attach-shogun: 将軍セッションにアタッチ
# -----------------------------------------------------------------------------
attach-shogun:
	@tmux attach -t shogun

# -----------------------------------------------------------------------------
# attach-agents: 家老・足軽セッションにアタッチ
# -----------------------------------------------------------------------------
attach-agents:
	@tmux attach -t multiagent
