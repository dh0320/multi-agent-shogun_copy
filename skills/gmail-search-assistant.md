# Gmail Search Assistant - ã‚¹ã‚­ãƒ«è¨­è¨ˆæ›¸

> **Version**: 1.0.0
> **Author**: ashigaru2 (System Architect)
> **Created**: 2026-02-11
> **Status**: Draft
> **Priority**: ä¸­

---

## 1. ã‚¹ã‚­ãƒ«å

**gmail-search-assistant**

```yaml
name: gmail-search-assistant
description: Gmail MCP ServerçµŒç”±ã§é«˜åº¦ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã€çµæœã‚’æ•´å½¢ãƒ»åˆ†æã™ã‚‹ã€‚è‡ªç„¶è¨€èªã§ã®æ¤œç´¢æ¡ä»¶æŒ‡å®šã€æ¤œç´¢çµæœã®ã‚µãƒãƒªãƒ¼ç”Ÿæˆã€CSV/JSONå‡ºåŠ›ã«å¯¾å¿œã€‚
```

---

## 2. ç›®çš„ãƒ»æ¦‚è¦

### è§£æ±ºã™ã‚‹èª²é¡Œ

Gmailã®æ¤œç´¢æ©Ÿèƒ½ã¯å¼·åŠ›ã ãŒã€ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚‹ï¼š

1. **æ¤œç´¢æ§‹æ–‡ã®è¤‡é›‘ã•**: æ¼”ç®—å­ï¼ˆAND/OR/NOTã€has:attachmentç­‰ï¼‰ã‚’è¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹
2. **çµæœã®å¯è¦–åŒ–ä¸è¶³**: å¤§é‡ã®æ¤œç´¢çµæœã‚’ä¸€è¦§ã§æŠŠæ¡ã—ã«ãã„
3. **åˆ†ææ©Ÿèƒ½ã®æ¬ å¦‚**: æ¤œç´¢çµæœã®çµ±è¨ˆï¼ˆä»¶æ•°æ¨ç§»ã€å·®å‡ºäººåˆ†å¸ƒç­‰ï¼‰ã‚’å–ã‚Œãªã„
4. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®åˆ¶é™**: æ¤œç´¢çµæœã‚’CSV/JSONå½¢å¼ã§ä¿å­˜ã—ã«ãã„

### æœ¬ã‚¹ã‚­ãƒ«ã®æä¾›ä¾¡å€¤

- **è‡ªç„¶è¨€èªæ¤œç´¢**: ã€Œå…ˆé€±ã®ä¸Šå¸ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ«ã€â†’Gmailæ¤œç´¢ã‚¯ã‚¨ãƒªã«è‡ªå‹•å¤‰æ›
- **ã‚µãƒãƒªãƒ¼ç”Ÿæˆ**: æ¤œç´¢çµæœã®æ¦‚è¦ï¼ˆä»¶æ•°ã€æœŸé–“ã€ä¸»è¦å·®å‡ºäººç­‰ï¼‰ã‚’è¡¨ç¤º
- **çµ±è¨ˆåˆ†æ**: æ¤œç´¢çµæœã®æ™‚ç³»åˆ—æ¨ç§»ã€å·®å‡ºäººåˆ†å¸ƒã‚’ã‚°ãƒ©ãƒ•åŒ–
- **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: CSV/JSONå½¢å¼ã§æ¤œç´¢çµæœã‚’ä¿å­˜ã€ãƒ‡ãƒ¼ã‚¿åˆ†æã«æ´»ç”¨

---

## 3. å…¥åŠ›ï¼ˆå¼•æ•°ï¼‰

### ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|-------------|------|
| `search` | æ¤œç´¢å®Ÿè¡Œ |
| `summary` | æ¤œç´¢çµæœã®ã‚µãƒãƒªãƒ¼ç”Ÿæˆ |
| `stats` | æ¤œç´¢çµæœã®çµ±è¨ˆåˆ†æ |
| `export` | æ¤œç´¢çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ› |

### 3.1 `search` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

```bash
/gmail-search-assistant search QUERY [OPTIONS]
```

| å¼•æ•°/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | å‹ | å¿…é ˆ | èª¬æ˜ |
|---------------|-----|------|------|
| `QUERY` | string | å¿…é ˆ | æ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆè‡ªç„¶è¨€èªã¾ãŸã¯Gmailæ§‹æ–‡ï¼‰ |
| `--max-results` | number | `50` | æœ€å¤§å–å¾—ä»¶æ•° |
| `--format` | string | `terminal` | å‡ºåŠ›å½¢å¼: `terminal`, `json`, `csv` |
| `--fields` | string | `all` | è¡¨ç¤ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `all`, `basic`, `custom` |
| `--sort` | string | `date` | ã‚½ãƒ¼ãƒˆé †: `date`, `from`, `subject` |

**ä½¿ç”¨ä¾‹**:
```bash
# è‡ªç„¶è¨€èªæ¤œç´¢
/gmail-search-assistant search "å…ˆé€±ã®ä¸Šå¸ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ«"

# Gmailæ¤œç´¢æ§‹æ–‡
/gmail-search-assistant search "from:boss@example.com after:2026/02/01"

# JSONå½¢å¼ã§å‡ºåŠ›
/gmail-search-assistant search "is:unread" --format json

# åŸºæœ¬æƒ…å ±ã®ã¿è¡¨ç¤º
/gmail-search-assistant search "has:attachment" --fields basic --max-results 20
```

### 3.2 `summary` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

```bash
/gmail-search-assistant summary QUERY [OPTIONS]
```

| å¼•æ•°/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | å‹ | å¿…é ˆ | èª¬æ˜ |
|---------------|-----|------|------|
| `QUERY` | string | å¿…é ˆ | æ¤œç´¢ã‚¯ã‚¨ãƒª |
| `--detail-level` | string | `medium` | è©³ç´°åº¦: `basic`, `medium`, `detailed` |

**ä½¿ç”¨ä¾‹**:
```bash
# åŸºæœ¬ã‚µãƒãƒªãƒ¼
/gmail-search-assistant summary "from:boss@example.com"

# è©³ç´°ã‚µãƒãƒªãƒ¼
/gmail-search-assistant summary "is:unread" --detail-level detailed
```

### 3.3 `stats` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

```bash
/gmail-search-assistant stats QUERY [OPTIONS]
```

| å¼•æ•°/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | å‹ | å¿…é ˆ | èª¬æ˜ |
|---------------|-----|------|------|
| `QUERY` | string | å¿…é ˆ | æ¤œç´¢ã‚¯ã‚¨ãƒª |
| `--metric` | string | `all` | çµ±è¨ˆæŒ‡æ¨™: `all`, `timeline`, `senders`, `size` |
| `--period` | string | `30d` | åˆ†ææœŸé–“ |

**ä½¿ç”¨ä¾‹**:
```bash
# å…¨çµ±è¨ˆè¡¨ç¤º
/gmail-search-assistant stats "label:ä»•äº‹"

# æ™‚ç³»åˆ—æ¨ç§»ã®ã¿
/gmail-search-assistant stats "from:newsletter@example.com" --metric timeline --period 90d

# å·®å‡ºäººåˆ†å¸ƒã®ã¿
/gmail-search-assistant stats "is:unread" --metric senders
```

### 3.4 `export` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

```bash
/gmail-search-assistant export QUERY [OPTIONS]
```

| å¼•æ•°/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | å‹ | å¿…é ˆ | èª¬æ˜ |
|---------------|-----|------|------|
| `QUERY` | string | å¿…é ˆ | æ¤œç´¢ã‚¯ã‚¨ãƒª |
| `--output` | string | å¿…é ˆ | å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| `--format` | string | `csv` | å‡ºåŠ›å½¢å¼: `csv`, `json`, `yaml` |
| `--fields` | string[] | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | å‡ºåŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ |

**ä½¿ç”¨ä¾‹**:
```bash
# CSVå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
/gmail-search-assistant export "label:è«‹æ±‚æ›¸" --output ~/invoices.csv

# JSONå½¢å¼ã§ç‰¹å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿
/gmail-search-assistant export "from:boss@example.com" --output ~/boss-emails.json --format json --fields "date,from,subject"
```

---

## 4. å‡ºåŠ›ï¼ˆçµæœï¼‰

### 4.1 `search` å‡ºåŠ›ä¾‹ï¼ˆterminalå½¢å¼ï¼‰

```
============================================
   Gmail Search Results
   Query: "from:boss@example.com after:2026/02/01"
   Total: 15 messages
============================================

[1] 2026-02-10 15:30 | boss@example.com
    ä»¶å: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ç¢ºèª
    ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: å…ˆé€±ã®é€²æ—å ±å‘Šã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ...

[2] 2026-02-09 09:15 | boss@example.com
    ä»¶å: æœˆæ¬¡å ±å‘Šã®æå‡ºæœŸé™ã«ã¤ã„ã¦
    ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: ä»Šæœˆã®æœˆæ¬¡å ±å‘Šã¯2æœˆ15æ—¥ã¾ã§ã«...

[3] 2026-02-08 14:20 | boss@example.com
    ä»¶å: æ¥é€±ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ—¥ç¨‹
    ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: æ¥é€±ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã™ãŒ...

... (12ä»¶çœç•¥)

è¡¨ç¤º: 15ä»¶ / å…¨15ä»¶
```

### 4.2 `summary` å‡ºåŠ›ä¾‹ï¼ˆmediumè©³ç´°åº¦ï¼‰

```
============================================
   Gmail Search Summary
   Query: "from:boss@example.com"
============================================

ğŸ“Š åŸºæœ¬çµ±è¨ˆ
  - ç·ä»¶æ•°: 128ä»¶
  - æœŸé–“: 2025-08-15 ã€œ 2026-02-10
  - å¹³å‡é »åº¦: é€±2.1ä»¶

ğŸ“§ ãƒ¡ãƒ¼ãƒ«ç‰¹æ€§
  - æœªèª­: 3ä»¶ (2.3%)
  - ã‚¹ã‚¿ãƒ¼ä»˜ã: 15ä»¶ (11.7%)
  - æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Š: 42ä»¶ (32.8%)
  - å¹³å‡ã‚µã‚¤ã‚º: 25.4 KB

ğŸ“… æœ€è¿‘ã®å‚¾å‘
  - å…ˆé€±: 5ä»¶ (+25% vs å‰é€±)
  - ä»Šæœˆ: 12ä»¶
  - å…ˆæœˆ: 18ä»¶

ğŸ·ï¸ ä¸»ãªãƒ©ãƒ™ãƒ«
  - é‡è¦: 45ä»¶
  - ä»•äº‹: 128ä»¶
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆA: 23ä»¶
```

### 4.3 `stats` å‡ºåŠ›ä¾‹ï¼ˆtimelineæŒ‡æ¨™ï¼‰

```
============================================
   Gmail Search Statistics
   Query: "from:newsletter@example.com"
   Period: Past 90 days
============================================

ğŸ“ˆ æ™‚ç³»åˆ—æ¨ç§»ï¼ˆé€±ã”ã¨ï¼‰

  2025-11-18: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8ä»¶
  2025-11-25: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 5ä»¶
  2025-12-02: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6ä»¶
  2025-12-09: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 7ä»¶
  2025-12-16: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8ä»¶
  2025-12-23: â–ˆâ–ˆâ–ˆ 3ä»¶  (å¹´æœ«ä¼‘æš‡)
  2025-12-30: â–ˆâ–ˆâ–ˆâ–ˆ 4ä»¶
  2026-01-06: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6ä»¶
  2026-01-13: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 9ä»¶
  2026-01-20: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 7ä»¶
  2026-01-27: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8ä»¶
  2026-02-03: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6ä»¶
  2026-02-10: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 5ä»¶

å¹³å‡: 6.3ä»¶/é€±
æœ€å¤§: 9ä»¶ (2026-01-13é€±)
æœ€å°: 3ä»¶ (2025-12-23é€±)
```

### 4.4 `export` å‡ºåŠ›ä¾‹ï¼ˆCSVå½¢å¼ï¼‰

```csv
date,from,subject,labels,size_kb
2026-02-10 15:30,boss@example.com,ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ç¢ºèª,é‡è¦;ä»•äº‹,12.5
2026-02-09 09:15,boss@example.com,æœˆæ¬¡å ±å‘Šã®æå‡ºæœŸé™ã«ã¤ã„ã¦,é‡è¦;ä»•äº‹,8.3
2026-02-08 14:20,boss@example.com,æ¥é€±ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ—¥ç¨‹,ä»•äº‹,5.1
...
```

---

## 5. è‡ªç„¶è¨€èªæ¤œç´¢ã®å¤‰æ›ä¾‹

### 5.1 æ—¥æœ¬èªâ†’Gmailæ¤œç´¢æ§‹æ–‡

| è‡ªç„¶è¨€èª | å¤‰æ›å¾Œã®Gmailæ¤œç´¢æ§‹æ–‡ |
|---------|---------------------|
| å…ˆé€±ã®ä¸Šå¸ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ« | `from:boss@example.com after:2026/02/04 before:2026/02/11` |
| æœªèª­ã®é‡è¦ãªãƒ¡ãƒ¼ãƒ« | `is:unread label:é‡è¦` |
| æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä»˜ãã®ãƒ¡ãƒ¼ãƒ« | `has:attachment` |
| ä»Šæœˆã®è«‹æ±‚æ›¸ãƒ¡ãƒ¼ãƒ« | `subject:è«‹æ±‚æ›¸ after:2026/02/01` |
| ã‚µã‚¤ã‚ºãŒå¤§ãã„ãƒ¡ãƒ¼ãƒ«ï¼ˆ5MBä»¥ä¸Šï¼‰ | `size:5m` |

### 5.2 Claude APIã«ã‚ˆã‚‹å¤‰æ›

è‡ªç„¶è¨€èªã‚¯ã‚¨ãƒªã‚’Claude APIã«é€ä¿¡ã—ã€Gmailæ¤œç´¢æ§‹æ–‡ã«å¤‰æ›ï¼š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›: ã€Œå…ˆé€±ã®æœªèª­ãƒ¡ãƒ¼ãƒ«ã§æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‚‚ã®ã€
â†“ Claude API
Gmailæ¤œç´¢æ§‹æ–‡: "is:unread has:attachment after:2026/02/04 before:2026/02/11"
```

---

## 6. æŠ€è¡“ä»•æ§˜

### 6.1 ä½¿ç”¨MCP Server

- **Gmail MCP Server** (æ¨å¥¨: GongRzhe/Gmail-MCP-Server)

### 6.2 å¿…è¦ãªMCPãƒ„ãƒ¼ãƒ«

| MCPé–¢æ•° | ç”¨é€” |
|---------|------|
| `mcp__gmail__search_messages` | ãƒ¡ãƒ¼ãƒ«æ¤œç´¢ |
| `mcp__gmail__get_message` | ãƒ¡ãƒ¼ãƒ«è©³ç´°å–å¾— |
| `mcp__gmail__list_labels` | ãƒ©ãƒ™ãƒ«ä¸€è¦§å–å¾— |

### 6.3 çµ±è¨ˆå‡¦ç†

- Python `collections.Counter` ã§å·®å‡ºäººåˆ†å¸ƒã‚’é›†è¨ˆ
- æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¯æ—¥ä»˜ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
- ã‚°ãƒ©ãƒ•è¡¨ç¤ºã¯ASCIIã‚¢ãƒ¼ãƒˆã§ç°¡æ˜“çš„ã«å®Ÿè£…

---

## 7. å®Ÿè£…æ–¹é‡

### 7.1 è‡ªç„¶è¨€èªå‡¦ç†

- Claude APIã‚’ä½¿ç”¨ã—ã¦è‡ªç„¶è¨€èªâ†’Gmailæ¤œç´¢æ§‹æ–‡ã«å¤‰æ›
- ã‚ˆãä½¿ã†å¤‰æ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŒ–

### 7.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- å¤§é‡æ¤œç´¢çµæœã¯æ®µéšçš„ã«å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- ã‚µãƒãƒªãƒ¼ç”Ÿæˆæ™‚ã¯å…¨ä»¶å–å¾—ã›ãšã€ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å¯èƒ½

### 7.3 ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼

- **CSV**: Excelã§é–‹ãã‚„ã™ã„ã€ãƒ‡ãƒ¼ã‚¿åˆ†æå‘ã‘
- **JSON**: ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã®å¾Œå‡¦ç†å‘ã‘
- **YAML**: äººé–“ãŒèª­ã¿ã‚„ã™ã„å½¢å¼

---

## 8. ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

- **æ¤œç´¢å±¥æ­´**: éå»ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ä¿å­˜ãƒ»å†å®Ÿè¡Œ
- **ä¿å­˜æ¸ˆã¿æ¤œç´¢**: ã‚ˆãä½¿ã†æ¤œç´¢ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–
- **AIã‚µãƒãƒªãƒ¼**: Claude APIã§æ¤œç´¢çµæœã‚’è‡ªå‹•è¦ç´„
- **ã‚°ãƒ©ãƒ•å‡ºåŠ›**: matplotlibã§çµ±è¨ˆã‚°ãƒ©ãƒ•ã‚’PNGå‡ºåŠ›

---

## 9. é–¢é€£ã‚¹ã‚­ãƒ«

- **gmail-label-manager**: æ¤œç´¢çµæœã«ãƒ©ãƒ™ãƒ«ã‚’ä¸€æ‹¬å‰²å½“
- **gmail-auto-sorter**: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ãƒ«ãƒ¼ãƒ«æ¡ä»¶ã«ä½¿ç”¨
